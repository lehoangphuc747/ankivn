---
const { url, utm = '', label = 'Chia sẻ' } = Astro.props as { url: string; utm?: string; label?: string };
const full = url + (utm || '');
---
<button
  class="group relative inline-flex items-center gap-3 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white font-bold py-3 px-6 rounded-2xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200"
  aria-label="Copy and share deck URL"
  onclick={`(async () => {
    try { 
      await navigator.clipboard.writeText(${JSON.stringify(full)}); 
      
      // Show success feedback
      const btn = event.target.closest('button');
      const originalText = btn.querySelector('.button-text').textContent;
      btn.querySelector('.button-text').textContent = '✓ Đã copy!';
      setTimeout(() => {
        btn.querySelector('.button-text').textContent = originalText;
      }, 2000);
    } catch {
      alert('Không thể copy. Vui lòng copy thủ công: ${full}');
    }
  })()`}
>
  <!-- Share Icon -->
  <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z" />
  </svg>
  
  <!-- Text -->
  <span class="button-text">{label}</span>

  <!-- Ripple Effect -->
  <div class="absolute inset-0 rounded-2xl bg-white opacity-0 group-hover:opacity-10 transition-opacity duration-200"></div>
</button>
