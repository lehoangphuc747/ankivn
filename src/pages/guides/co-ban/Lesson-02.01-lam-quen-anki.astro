---
import SimpleLessonLayout from '@/layouts/SimpleLessonLayout.astro';
import { basicCourse } from '@/lib/course-data';
import YouTubeEmbed from '@/components/common/YouTubeEmbed.astro';

const lessonInfo = {
  title: "Làm quen với Anki - Từ tải về đến thẻ đầu tiên",
  description: "Hướng dẫn chi tiết tải, cài đặt và làm quen với giao diện Anki. Tạo deck đầu tiên và hiểu các thành phần cơ bản của phần mềm.",
  level: "Cơ bản",
  duration: "60 phút",
  author: "AnkiVN Team",
  publishDate: "2024-01-16",
  tags: ["anki-setup", "installation", "interface", "first-deck"],
};

// Navigation logic
let prevLesson: { title: string; slug: string } | undefined;
let nextLesson: { title: string; slug: string } | undefined;

const allLessons = basicCourse.modules.flatMap(m => m.lessons.map(l => ({ ...l, slug: `co-ban/${l.slug}` })));
const currentSlug = 'co-ban/Lesson-02.01-lam-quen-anki';
const currentIndex = allLessons.findIndex(l => l.slug === currentSlug);

if (currentIndex !== -1) {
  if (currentIndex > 0) {
    prevLesson = allLessons[currentIndex - 1];
  }
  if (currentIndex < allLessons.length - 1) {
    nextLesson = allLessons[currentIndex + 1];
  }
}
---

<SimpleLessonLayout
  title={lessonInfo.title}
  description={lessonInfo.description}
  author={lessonInfo.author}
  date={lessonInfo.publishDate}
  duration={lessonInfo.duration}
  level={lessonInfo.level}
  tags={lessonInfo.tags}
  prevLesson={prevLesson}
  nextLesson={nextLesson}
>
  <!-- 3. Chuyển toàn bộ nội dung Markdown vào đây dưới dạng HTML -->
  <h2>Tải và cài đặt Anki</h2>

  <h3>Bước 1: Tải Anki</h3>
  <p>Truy cập <strong><a href="https://apps.ankiweb.net" target="_blank" rel="noopener noreferrer">https://apps.ankiweb.net</a></strong> và tải phiên bản phù hợp:</p>

  <h4><strong>💻 Desktop (Khuyến nghị)</strong></h4>
  <ul>
    <li><strong>Windows</strong>: <code>anki-2.1.xx-windows-qt6.exe</code></li>
    <li><strong>macOS</strong>: <code>anki-2.1.xx-mac-intel-qt6.dmg</code> (Intel) hoặc <code>anki-2.1.xx-mac-apple-qt6.dmg</code> (Apple Silicon)</li>
    <li><strong>Linux</strong>: <code>anki-2.1.xx-linux-qt6.tar.zst</code></li>
  </ul>

  <h4><strong>📱 Mobile</strong></h4>
  <ul>
    <li><strong>Android</strong>: <a href="https://play.google.com/store/apps/details?id=com.ichi2.anki" target="_blank" rel="noopener noreferrer">AnkiDroid</a> (Miễn phí)</li>
    <li><strong>iOS</strong>: <a href="https://apps.apple.com/app/ankimobile-flashcards/id373493387" target="_blank" rel="noopener noreferrer">AnkiMobile</a> ($24.99)</li>
  </ul>

  <h4><strong>🌐 Web</strong></h4>
  <ul>
    <li><strong>AnkiWeb</strong>: <a href="https://ankiweb.net" target="_blank" rel="noopener noreferrer">https://ankiweb.net</a> (Miễn phí, tính năng hạn chế)</li>
  </ul>

  <h3>Bước 2: Cài đặt</h3>

  <h4><strong>Windows:</strong></h4>
  <ol>
    <li>Chạy file <code>.exe</code> vừa tải</li>
    <li>Nhấn "Next" → "I Agree" → "Install"</li>
    <li>Chọn "Launch Anki" → "Finish"</li>
  </ol>

  <h4><strong>macOS:</strong></h4>
  <ol>
    <li>Mở file <code>.dmg</code></li>
    <li>Kéo Anki vào thư mục Applications</li>
    <li>Mở Anki từ Launchpad</li>
  </ol>

  <h4><strong>Linux:</strong></h4>
  <pre><code>tar -xf anki-2.1.xx-linux-qt6.tar.zst
cd anki-2.1.xx-linux-qt6
sudo ./install.sh
</code></pre>

  <h3>Bước 3: Khởi động lần đầu</h3>
  <p>Khi mở Anki lần đầu, bạn sẽ thấy:</p>
  <img src="/images/anki-welcome.png" alt="Anki Welcome Screen" />
  <ol>
    <li><strong>Language</strong>: Chọn "Tiếng Việt" nếu muốn</li>
    <li><strong>Profile</strong>: Giữ mặc định "User 1"</li>
    <li>Nhấn "OK"</li>
  </ol>

  <h2>Giao diện chính của Anki</h2>
  <h3>Tổng quan giao diện</h3>
  <img src="/images/anki-main-interface.png" alt="Anki Main Interface" />

  <h3>1. <strong>Thanh Menu (Menu Bar)</strong></h3>
  <h4><strong>File</strong></h4>
  <ul>
    <li><strong>Import</strong>: Nhập deck từ file <code>.apkg</code></li>
    <li><strong>Export</strong>: Xuất deck ra file</li>
    <li><strong>Exit</strong>: Thoát Anki</li>
  </ul>

  <h3>2. <strong>Deck List (Danh sách Deck)</strong></h3>
  <p>Hiển thị tất cả deck với thông tin: New, Learning, To Review, Total.</p>

  <h3>3. <strong>Toolbar (Thanh công cụ)</strong></h3>
  <ul>
    <li><strong>Decks</strong>: Quay về danh sách deck</li>
    <li><strong>Add</strong>: Thêm thẻ mới</li>
    <li><strong>Browse</strong>: Mở trình duyệt thẻ</li>
    <li><strong>Stats</strong>: Xem thống kê</li>
    <li><strong>Sync</strong>: Đồng bộ với AnkiWeb</li>
  </ul>

  <h2>Tạo Deck đầu tiên</h2>
  <h3>Bước 1: Tạo Deck mới</h3>
  <ol>
    <li>Nhấn nút <strong>"Create Deck"</strong> ở cuối danh sách deck</li>
    <li>Nhập tên deck, ví dụ: <strong>"Tiếng Anh Cơ bản"</strong></li>
    <li>Nhấn <strong>"OK"</strong></li>
  </ol>
  <img src="/images/create-deck.png" alt="Create Deck Dialog" />

  <h3>Bước 2: Thêm thẻ đầu tiên</h3>
  <ol>
    <li>Chọn deck vừa tạo</li>
    <li>Nhấn nút <strong>"Add"</strong></li>
  </ol>
  <img src="/images/add-note.png" alt="Add Note Window" />

  <h3>Bước 4: Tạo thẻ đầu tiên</h3>
  <p>Hãy tạo một thẻ từ vựng tiếng Anh:</p>
  <p><strong>Front</strong>: <code>What does "serendipity" mean?</code><br/>
  <strong>Back</strong>: <code>The occurrence of events by chance in a happy way</code><br/>
  <strong>Tags</strong>: <code>vocabulary english</code></p>
  <img src="/images/first-card.png" alt="First Card Example" />
  <p>Nhấn <strong>"Add"</strong> để lưu thẻ.</p>

  <h2>Học thẻ đầu tiên</h2>
  <h3>Bước 1: Bắt đầu học</h3>
  <ol>
    <li>Đóng cửa sổ "Add Note"</li>
    <li>Quay về danh sách deck</li>
    <li>Nhấn vào deck "Tiếng Anh Cơ bản"</li>
    <li>Nhấn <strong>"Study Now"</strong></li>
  </ol>

  <h3>Bước 3: Quy trình học một thẻ</h3>
  <ol>
    <li><strong>Đọc câu hỏi</strong> ở mặt trước</li>
    <li><strong>Nghĩ về đáp án</strong> trong đầu</li>
    <li><strong>Nhấn "Show Answer"</strong> hoặc <strong>Space</strong></li>
    <li><strong>So sánh</strong> đáp án của bạn với đáp án đúng</li>
    <li><strong>Chọn độ khó</strong>: Again (1), Hard (2), Good (3), Easy (4)</li>
  </ol>

  <h2>Tạo tài khoản AnkiWeb</h2>
  <h3>Tại sao cần AnkiWeb?</h3>
  <ul>
    <li><strong>Backup tự động</strong>: Dữ liệu an toàn trên cloud</li>
    <li><strong>Đồng bộ nhiều thiết bị</strong>: Desktop, mobile, web</li>
    <li><strong>Truy cập mọi lúc</strong>: Học trên điện thoại, máy tính</li>
  </ul>

  <h3>Bước tạo tài khoản:</h3>
  <ol>
    <li>Truy cập <strong><a href="https://ankiweb.net/account/register" target="_blank" rel="noopener noreferrer">https://ankiweb.net/account/register</a></strong></li>
    <li>Điền thông tin và xác nhận email</li>
  </ol>

  <h3>Đồng bộ lần đầu:</h3>
  <ol>
    <li>Trong Anki Desktop: nhấn <strong>"Sync"</strong></li>
    <li>Nhập username/password AnkiWeb</li>
    <li>Chọn <strong>"Upload to AnkiWeb"</strong> (lần đầu)</li>
    <li>Đợi đồng bộ hoàn tất</li>
  </ol>

  <h2>Best Practices cho người mới</h2>
  <ol>
    <li><strong>Bắt đầu nhỏ</strong>: 10-15 thẻ mới/ngày</li>
    <li><strong>Consistency</strong>: Học mỗi ngày, dù chỉ 10 phút</li>
    <li><strong>Quality over Quantity</strong>: Tạo thẻ chất lượng tốt hơn nhiều thẻ kém</li>
    <li><strong>Regular Review</strong>: Không bỏ qua Review cards</li>
    <li><strong>Backup</strong>: Đồng bộ AnkiWeb thường xuyên</li>
  </ol>

  <h2>Kết luận</h2>
  <p>Chúc mừng! Bạn đã hoàn thành bước đầu tiên quan trọng nhất - làm quen với Anki và tạo được deck đầu tiên.</p>
  <p>Trong module tiếp theo, chúng ta sẽ đi sâu vào nghệ thuật tạo thẻ hiệu quả - yếu tố quyết định 80% thành công khi sử dụng Anki.</p>
</SimpleLessonLayout>