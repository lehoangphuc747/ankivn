---
import SimpleLessonLayout from '@/layouts/SimpleLessonLayout.astro';
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
  const guides = await getCollection('guides');
  return guides.map((g) => ({ params: { slug: g.slug } }));
}

const { slug } = Astro.params;
const guide = (await getCollection('guides')).find((g) => g.slug === slug);
if (!guide) throw new Error('Guide not found');

const { Content } = await guide.render();
---

<SimpleLessonLayout 
  title={guide.data.title}
  description={guide.data.description}
  author={guide.data.author}
  date={guide.data.publishDate}
  duration={guide.data.duration}
  level={guide.data.level}
  tags={guide.data.tags}
>
  <Content />
</SimpleLessonLayout>
